<!DOCTYPE html>
<html>
<head>
    <title>Drilling Completion Chart</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <div id="drilling-chart"></div>

    <script>
        // Read the data from the CSV file
        Plotly.d3.csv('testfetch.csv', function(data) {
            // Process the data
            var drillingDates = [];
            var drillingCounts = [];

            data.forEach(function(row) {
                if (row['Drilling Status'] === 'Completed') {
                    drillingDates.push(new Date(row['T/W Drill Start Date']));
                    drillingCounts.push(1);
                }
            });

            // Create the drilling chart
            var drillingChart = {
                x: drillingDates,
                y: drillingCounts,
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Drilling Completion',
                marker: {
                    color: 'blue',
                    symbol: 'circle'
                },
                text: drillingCounts.map(count => 'Completed: ' + count),
                hovertemplate: '%{xaxis.title.text}: %{x}<br>%{text}'
            };

            // Define the layout
            var layout = {
                title: 'Drilling Completion by Month',
                xaxis: {
                    title: 'Month',
                    tickmode: 'linear',
                    tick0: 1,
                    dtick: 1
                },
                yaxis: {
                    title: 'Number of Schemes'
                },
                legend: {
                    title: 'Legend',
                    x: 1.05,
                    y: 0.5,
                    bgcolor: 'rgba(255, 255, 255, 0.7)',
                    orientation: 'v',
                    traceorder: 'normal'
                },
                showlegend: true
            };

            // Create the chart
            Plotly.newPlot('drilling-chart', [drillingChart], layout);
        });
    </script>
</body>
</html>
